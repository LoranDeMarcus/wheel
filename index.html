<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="styles.css">
  <title>Рулетка</title>
</head>
<body>
<div id="ltBlock1560538743" data-block-id="1560539228" data-has-css="true"
     class="lt-block lt-view form02 lt-form lt-form-normal forma-sedov sedov-link-1"
     data-code="b-57cd2">
  <div class="lt-block-wrapper block-cover lazyloaded" id="blockCover1560539228"
       data-bg="//fs-thb03.getcourse.ru/fileservice/file/thumbnail/h/4bfc959bcd61644c81c13165e4a431cb.jpg/s/s2000x/a/30899/sc/186">
    <div class="cover-filter"></div>
    <div class="cover-wrapper flex-container height-fixed" data-main-class="cover-wrapper">
      <div class="container">
        <div class="row">
          <div class="modal-block-content block-box col-md-8 col-md-offset-2" style="">

            <form id="ltForm4901306" class="lt-normal-form lt-form-inner lt-form" method="post"
                  data-open-new-window="0">
              <input type="hidden" name="formParams[setted_offer_id]"
                     class="external-value offer_id">


              <div class="form-content">
                <div data-param="form/items/parts/field96003" data-item-name="field96003"
                     data-title="Элемент" data-animation-mode="no"
                     class="builder-item part-html  spinner-block sedov-link-1">
                  <div data-raw-editable="true"
                       data-param="form/items/parts/field96003/inner/value" data-mode="text/html">
                    <div class="container wheel-container text-center">
                      <div class="circle">
                        <div class="deal-wheel">
                          <div class="ticker"></div>
                          <ul class="spinner2">
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div data-param="form/items/parts/field55587" data-item-name="field55587"
                     data-title="Элемент" data-animation-mode="no"
                     class="builder-item part-separator ">
                  <hr>
                </div>
                <div data-param="form/items/parts/field36106" data-item-name="field36106"
                     data-title="Элемент" data-animation-mode="no"
                     class="builder-item part-manyPositions  sedov_block-hidden">
                  <label class="clearfix form-position" id="formPosition8133727"
                         data-offer-id="3979850">
                    <div class="pull-left form-position-checker">
                      <input class="form-position-input form-position-offer-3979850"
                             data-price-value="0" data-old-price-value="0"
                             data-price-currency="руб." data-qty-value="1"
                             data-price-delimiter="0.001"
                             data-decimal-separator="." data-thousands-separator=" "
                             id="input-formPosition8133727" name="formParams[offer_id][]"
                             type="radio" value="3979850">
                    </div>
                    <div class="pull-left form-position-title" data-start="">
                      <span class="offer-title">Подарок "Черная пятница" Рецепт и видео урок "Тирамису"</span>

                    </div>
                    <div class="form-position-price pull-right">
											<span class="final-price">
			0 руб.			</span>
                    </div>
                  </label>
                  <label class="clearfix form-position" id="formPosition6531056"
                         data-offer-id="3965739">
                    <div class="pull-left form-position-checker">
                      <input class="form-position-input form-position-offer-3965739"
                             data-price-value="0" data-old-price-value="0"
                             data-price-currency="руб." data-qty-value="1"
                             data-price-delimiter="0.001"
                             data-decimal-separator="." data-thousands-separator=" "
                             id="input-formPosition6531056" name="formParams[offer_id][]"
                             type="radio" value="3965739">
                    </div>
                    <div class="pull-left form-position-title" data-start="">
                      <span class="offer-title">Вебинар "Прага"</span>

                    </div>
                    <div class="pull-left form-position-title" data-start="">
                      <span class="offer-title">Вебинар "Прага"</span>

                    </div>
                    <div class="form-position-price pull-right">
											<span class="final-price">
			0 руб.			</span>
                    </div>
                  </label>
                  <label class="clearfix form-position" id="formPosition7177870"
                         data-offer-id="3965750">
                    <div class="pull-left form-position-checker">
                      <input class="form-position-input form-position-offer-3965750"
                             data-price-value="0" data-old-price-value="0"
                             data-price-currency="руб." data-qty-value="1"
                             data-price-delimiter="0.001"
                             data-decimal-separator="." data-thousands-separator=" "
                             id="input-formPosition7177870" name="formParams[offer_id][]"
                             type="radio" value="3965750">
                    </div>
                    <div class="pull-left form-position-title" data-start="">
                      <span class="offer-title">Рецепт и видео урок. Торт "Москва"</span>

                    </div>
                    <div class="form-position-price pull-right">
											<span class="final-price">
			0 руб.			</span>
                    </div>
                  </label>

                  <label class="clearfix form-position" id="formPosition3003881"
                         data-offer-id="3965758">
                    <div class="pull-left form-position-checker">
                      <input class="form-position-input form-position-offer-3965758"
                             data-price-value="0" data-old-price-value="0"
                             data-price-currency="руб." data-qty-value="1"
                             data-price-delimiter="0.001"
                             data-decimal-separator="." data-thousands-separator=" "
                             id="input-formPosition3003881" name="formParams[offer_id][]"
                             type="radio" value="3965758">
                    </div>
                    <div class="pull-left form-position-title" data-start="">
                      <span class="offer-title">Рецепт и видео урок. Торт "Сникерс"</span>

                    </div>
                    <div class="form-position-price pull-right">
											<span class="final-price">
			0 руб.			</span>
                    </div>
                  </label>
                  <label class="clearfix form-position" id="formPosition7436632"
                         data-offer-id="3970923">
                    <div class="pull-left form-position-checker">
                      <input class="form-position-input form-position-offer-3970923"
                             data-price-value="0" data-old-price-value="0"
                             data-price-currency="руб." data-qty-value="1"
                             data-price-delimiter="0.001"
                             data-decimal-separator="." data-thousands-separator=" "
                             id="input-formPosition7436632" name="formParams[offer_id][]"
                             type="radio" value="3970923">
                    </div>
                    <div class="pull-left form-position-title" data-start="">
                      <span class="offer-title">Рецепт и видео урок. Торт "Красный бархат"</span>

                    </div>
                    <div class="form-position-price pull-right">
											<span class="final-price">
			0 руб.			</span>
                    </div>
                  </label>

                  <label class="clearfix form-position" id="formPosition9405128"
                         data-offer-id="3970897">
                    <div class="pull-left form-position-checker">
                      <input class="form-position-input form-position-offer-3970897"
                             data-price-value="0" data-old-price-value="0"
                             data-price-currency="руб." data-qty-value="1"
                             data-price-delimiter="0.99"
                             data-decimal-separator="." data-thousands-separator=" "
                             id="input-formPosition9405128" name="formParams[offer_id][]"
                             type="radio" value="3970897">
                    </div>
                    <div class="pull-left form-position-title" data-start="">
                      <span class="offer-title">Рецепт и видео урок. Торт "Черный лес"</span>

                    </div>
                    <div class="form-position-price pull-right">
											<span class="final-price">
			0 руб.			</span>
                    </div>
                  </label>

                  <label class="clearfix form-position" id="formPosition9405129"
                         data-offer-id="3970897">
                    <div class="pull-left form-position-checker">
                      <input class="form-position-input form-position-offer-3970897"
                             data-price-value="0" data-old-price-value="0"
                             data-price-currency="руб." data-qty-value="1"
                             data-price-delimiter="0.99"
                             data-decimal-separator="." data-thousands-separator=" "
                             id="input-formPosition9405129" name="formParams[offer_id][]"
                             type="radio" value="3970899">
                    </div>
                    <div class="pull-left form-position-title" data-start="">
                      <span class="offer-title">IPhone 15</span>

                    </div>
                    <div class="form-position-price pull-right">
											<span class="final-price">
			0 руб.			</span>
                    </div>
                  </label>

                  <label class="clearfix form-position" id="formPosition9405130"
                         data-offer-id="3970897">
                    <div class="pull-left form-position-checker">
                      <input class="form-position-input form-position-offer-3970897"
                             data-price-value="0" data-old-price-value="0"
                             data-price-currency="руб." data-qty-value="1"
                             data-price-delimiter="0.99"
                             data-decimal-separator="." data-thousands-separator=" "
                             id="input-formPosition9405130" name="formParams[offer_id][]"
                             type="radio" value="3970899">
                    </div>
                    <div class="pull-left form-position-title" data-start="">
                      <span class="offer-title">Рандомный рецепт и видео урок. Номер 2</span>

                    </div>
                    <div class="form-position-price pull-right">
											<span class="final-price">
			0 руб.			</span>
                    </div>
                  </label>


                  <label class="clearfix form-position" id="formPosition9405131"
                         data-offer-id="3970897">
                    <div class="pull-left form-position-checker">
                      <input class="form-position-input form-position-offer-3970897"
                             data-price-value="0" data-old-price-value="0"
                             data-price-currency="руб." data-qty-value="1"
                             data-price-delimiter="0.99"
                             data-decimal-separator="." data-thousands-separator=" "
                             id="input-formPosition9405131" name="formParams[offer_id][]"
                             type="radio" value="3970899">
                    </div>
                    <div class="pull-left form-position-title" data-start="">
                      <span class="offer-title">Рандомный рецепт и видео урок. Номер 3</span>

                    </div>
                    <div class="form-position-price pull-right">
											<span class="final-price">
			0 руб.			</span>
                    </div>
                  </label>
                </div>
                <button type="button" id="button2984538" data-btn-locked=""
                        class="btn f-btn  button-md btn-success"
                        style="color: #FFFFFF; background-color: #ff4058; border-radius: 50px !important; ">
                  Вращать колесо
                </button>
              </div>

              <div class="common-setting-link box-setting-link" data-icon-class="fa fa-adjust"
                   data-param="form/formBox" data-title="Стиль блока"
                   data-setting-editable="true"></div>
              <div class="common-setting-link form-setting-link" data-icon-class="fa fa-wpforms"
                   data-param="form/handler" data-title="Что делать после заполнения"
                   data-setting-editable="true"></div>
            </form>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div>
  <div align="center">
    <h1>Winwheel.js example wheel - basic code wheel</h1>
    <p>Here is an example of a basic code drawn wheel which spins to a stop with the prize won
      alerted to the user.</p>
    <br />
    <p>Choose a power setting then press the Spin button. You will be alerted to the prize won when
      the spinning stops.</p>
    <br />
    <table cellpadding="0" cellspacing="0" border="0">
      <tr>
        <td>
          <div class="power_controls">
            <button id="spin_button" type="button" onClick="startSpin();">Spin</button>
            <br /><br />
            &nbsp;&nbsp;<a href="#" onClick="resetWheel(); return false;">Play Again</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(reset)
          </div>
        </td>
        <td width="438" height="582" class="the_wheel" align="center" valign="center">
          <canvas id="canvas" width="434" height="434">
            <p style="{color: white}" align="center">Sorry, your browser doesn't support canvas.
              Please try another.</p>
          </canvas>
        </td>
      </tr>
    </table>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script>
<script src="index.js"></script>
<script src="Winwheel.js"></script>
<script>
  const wheel = new Winwheel({
    numSegments: 8,
    outerRadius: 170,
    segments: [
      { fillStyle: '#eae56f', text: 'Prize 1' },
      { fillStyle: '#89f26e', text: 'Prize 2' },
      { fillStyle: '#7de6ef', text: 'Prize 3' },
      { fillStyle: '#e7706f', text: 'Prize 4' },
      { fillStyle: '#eae56f', text: 'Prize 5' },
      { fillStyle: '#89f26e', text: 'Prize 6' },
      { fillStyle: '#7de6ef', text: 'Prize 7' },
      { fillStyle: '#e7706f', text: 'Prize 8' },
    ],
    animation: {
      type: 'spinToStop',
      duration: 5,
      spins: 8,
      callbackAfter: drawTriangle,
    },
  })

  function calculatePrize() {
    // This formula always makes the wheel stop somewhere inside prize 3 at least
    // 1 degree away from the start and end edges of the segment.
    let stopAt = (91 + Math.floor((Math.random() * 43)))

    // Important thing is to set the stopAngle of the animation before stating the spin.
    wheel.animation.stopAngle = stopAt

    // May as well start the spin from here.
    wheel.startAnimation()
  }

  // Usual pointer drawing code.
  drawTriangle()

  function drawTriangle() {
    // Get the canvas context the wheel uses.
    let ctx = wheel.ctx

    ctx.strokeStyle = 'navy'     // Set line colour.
    ctx.fillStyle = 'aqua'     // Set fill colour.
    ctx.lineWidth = 2
    ctx.beginPath()              // Begin path.
    ctx.moveTo(170, 5)           // Move to initial position.
    ctx.lineTo(230, 5)           // Draw lines to make the shape.
    ctx.lineTo(200, 40)
    ctx.lineTo(171, 5)
    ctx.stroke()                 // Complete the path by stroking (draw lines).
    ctx.fill()                   // Then fill.
  }

  let wheelSpinning = false

  function startSpin() {
    // Ensure that spinning can't be clicked again while already running.
    if (wheelSpinning === false) {
      // Disable the spin button so can't click again while wheel is spinning.
      document.getElementById('spin_button').src = 'spin_off.png'
      document.getElementById('spin_button').className = ''

      // Begin the spin animation by calling startAnimation on the wheel object.
      // Important thing is to set the stopAngle of the animation before stating the spin.
      wheel.animation.stopAngle = (91 + Math.floor((Math.random() * 43)))

      // May as well start the spin from here.
      wheel.startAnimation()

      // Set to true so that power can't be changed and spin button re-enabled during
      // the current animation. The user will have to reset before spinning again.
      wheelSpinning = true
    }
  }

  function resetWheel() {
    wheel.stopAnimation(false)  // Stop the animation, false as param so does not call callback function.
    wheel.rotationAngle = 0     // Re-set the wheel angle to 0 degrees.
    wheel.draw()                // Call draw to render changes to the wheel.

    document.getElementById('pw1').className = ''  // Remove all colours from the power level indicators.
    document.getElementById('pw2').className = ''
    document.getElementById('pw3').className = ''

    wheelSpinning = false          // Reset to false to power buttons and spin can be clicked again.
  }

  function alertPrize(indicatedSegment) {
    // Do basic alert of the segment text. You would probably want to do something more interesting with this information.
    alert('You have won ' + indicatedSegment.text)
  }

</script>
</body>
</html>
